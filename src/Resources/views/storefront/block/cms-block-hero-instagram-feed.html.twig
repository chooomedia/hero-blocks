{% block block_hero_instagram_feed %}
    {# WICHTIG: Instagram Feed Block - TypeDataResolver lädt Posts vom Backend #}
    {# WICHTIG: Keine Slots - Block rendert direkt Instagram Posts #}
    
    {# WICHTIG: License-Check - Prüft ob Premium-Feature verfügbar ist #}
    {% set licenseStatus = config('HeroBlocks.config.licenseStatus')|default('active') %}
    
    {% set element = block.slots.getSlot('instagramFeed') %}
    {% set columns = 1 %}
    
    {# Block Config aus customFields #}
    {% set displayMode = block.customFields.displayMode|default('grid') %}
    {% set columnsConfig = block.customFields.columns|default(4) %}
    {% set postLimit = block.customFields.postLimit|default(12) %}
    
    {# Wrapper für Block (col-12 = full width) #}
    <div class="col-12 hero-instagram-feed-wrapper" data-cms-element-id="{{ element ? element.id : 'no-element' }}">
        {% block block_hero_instagram_feed_inner %}
            {# WICHTIG: License-Hinweis anzeigen wenn abgelaufen #}
            {% if licenseStatus == 'expired' %}
                {% include '@HeroBlocks/storefront/component/license-expired-notice.html.twig' with {
                    feature: 'Instagram Feed',
                    licenseStatus: licenseStatus
                } only %}
            {% endif %}
            
            {# WICHTIG: Element Template wird hier gerendert #}
            {# Element Template hat Zugriff auf element.data.instagramPosts (vom TypeDataResolver) #}
            {% if element %}
                {% sw_include '@Storefront/storefront/element/cms-element-' ~ element.type ~ '.html.twig' ignore missing %}
            {% else %}
                {# Fallback wenn kein Element definiert (sollte nicht passieren) #}
                <div class="alert alert-warning">
                    Instagram Feed Element nicht gefunden. Bitte Block-Konfiguration prüfen.
                </div>
            {% endif %}
        {% endblock %}
    </div>
{% endblock %}

