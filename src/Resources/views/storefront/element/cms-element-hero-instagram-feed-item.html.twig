{% block element_hero_instagram_feed_item %}
    {# WICHTIG: Masonry-Klasse für wichtige Posts (index 0, 3, 7, etc.) #}
    {% set isFeatured = (index is defined and index in [0, 3, 7, 11]) %}
    {% set itemClass = 'instagram-item' %}
    {% if isFeatured %}
        {% set itemClass = itemClass ~ ' instagram-item--featured' %}
    {% endif %}
    
    <article class="{{ itemClass }}" 
             data-post-id="{{ post.id }}"
             data-post-index="{{ index|default(0) }}"
             itemscope
             itemtype="https://schema.org/SocialMediaPosting">
        
        {% block element_hero_instagram_feed_item_link %}
            <a href="{{ post.permalink }}" 
               class="instagram-item__link"
               target="_blank"
               rel="noopener noreferrer nofollow"
               title="{{ 'heroBlocks.instagramFeed.viewPostOn'|trans({'%platform%': 'Instagram'}) }}: {{ post.caption|default('')|striptags|slice(0, 60) }}{% if post.caption|length > 60 %}...{% endif %}"
               aria-label="{{ 'heroBlocks.instagramFeed.viewPostOn'|trans({'%platform%': 'Instagram'}) }}"
               itemprop="url">
                
                {% block element_hero_instagram_feed_item_media %}
                    <div class="instagram-item__media">
                        {# WICHTIG: Lazy Loading für Performance #}
                    {% if post.media_type == 'VIDEO' %}
                        <video class="instagram-item__video" 
                               poster="{{ post.thumbnail_url }}"
                               preload="none"
                               muted
                               playsinline
                               aria-label="{{ 'heroBlocks.instagramFeed.video'|trans }}: {{ post.caption|default('')|striptags|slice(0, 60) }}">
                            <source src="{{ post.media_url }}" type="video/mp4">
                            <p>{{ 'heroBlocks.instagramFeed.videoNotSupported'|trans }}</p>
                        </video>
                        <div class="instagram-item__video-icon" aria-hidden="true">
                            {% sw_icon 'play-circle' style { size: '32px' } %}
                        </div>
                    {% else %}
                        <img src="{{ post.media_url }}" 
                             alt="{{ post.caption|default('Instagram Post')|striptags|slice(0, 125) }}"
                             title="{{ post.caption|default('')|striptags|slice(0, 100) }}"
                             class="instagram-item__image"
                             loading="lazy"
                             width="600"
                             height="600"
                             itemprop="image">
                    {% endif %}
                        
                    {# Overlay für Hover-Effekt #}
                    <div class="instagram-item__overlay" aria-hidden="true">
                        {% if config.showLikes.value and post.like_count is defined %}
                            <span class="instagram-item__stat instagram-item__stat--likes" 
                                  title="{{ 'heroBlocks.instagramFeed.likes'|trans }}: {{ post.like_count }}">
                                {% sw_icon 'heart' style { size: '20px' } %}
                                <span class="instagram-item__stat-count" itemprop="interactionStatistic" itemscope itemtype="https://schema.org/InteractionCounter">
                                    <meta itemprop="interactionType" content="https://schema.org/LikeAction" />
                                    <meta itemprop="userInteractionCount" content="{{ post.like_count }}" />
                                    {{ post.like_count }}
                                </span>
                            </span>
                        {% endif %}
                        {% if config.showComments.value and post.comments_count is defined %}
                            <span class="instagram-item__stat instagram-item__stat--comments"
                                  title="{{ 'heroBlocks.instagramFeed.comments'|trans }}: {{ post.comments_count }}">
                                {% sw_icon 'comment' style { size: '20px' } %}
                                <span class="instagram-item__stat-count" itemprop="interactionStatistic" itemscope itemtype="https://schema.org/InteractionCounter">
                                    <meta itemprop="interactionType" content="https://schema.org/CommentAction" />
                                    <meta itemprop="userInteractionCount" content="{{ post.comments_count }}" />
                                    {{ post.comments_count }}
                                </span>
                            </span>
                        {% endif %}
                    </div>
                    </div>
                {% endblock %}
                
            {% block element_hero_instagram_feed_item_caption %}
                {% if config.showCaptions.value and post.caption %}
                    <div class="instagram-item__caption" itemprop="text">
                        {{ post.caption|striptags|slice(0, 100) }}{% if post.caption|length > 100 %}...{% endif %}
                    </div>
                {% endif %}
            {% endblock %}
            
            {# SEO: Structured Data - Hidden Metadata #}
            {% if post.timestamp is defined %}
                <meta itemprop="datePublished" content="{{ post.timestamp }}">
            {% endif %}
        </a>
    {% endblock %}
</article>
{% endblock %}

